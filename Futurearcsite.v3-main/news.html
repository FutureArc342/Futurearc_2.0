<!DOCTYPE html>
<html lang="sv">
<head>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nyheter - FutureArc</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="assets/css/style.css">
  <script src="https://cdn.jsdelivr.net/npm/tabletop@1.6.4/tabletop.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Iceland&display=swap" rel="stylesheet" />
  <style>
    :root {
      --primary: #f86700;
      --primary-dark: #e05e00;
      --accent: #ff8c42;
    }

    body {
      font-family: 'Inter', 'Poppins', sans-serif;
      background: #000000;
      color: #fff;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Animated Background */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 80%, rgba(248, 103, 0, 0.08) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 140, 66, 0.08) 0%, transparent 50%);
      animation: backgroundFloat 20s ease-in-out infinite;
      z-index: -1;
    }

    @keyframes backgroundFloat {
      0%, 100% { transform: translate(0, 0) rotate(0deg); }
      25% { transform: translate(-10px, -10px) rotate(1deg); }
      50% { transform: translate(10px, -5px) rotate(-1deg); }
      75% { transform: translate(-5px, 10px) rotate(0.5deg); }
    }

    /* Floating Particles */
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }

    .particle {
      position: absolute;
      width: 2px;
      height: 2px;
      background: var(--primary);
      border-radius: 50%;
      animation: float 6s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0; }
      50% { transform: translateY(-20px) rotate(180deg); opacity: 1; }
    }

    /* Glassmorphism */
    .glass {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    /* Navigation */
    .nav-link {
      font-family: 'Iceland', serif;
      color: #fff;
      text-decoration: none;
      font-weight: bold;
      font-size: 1.9rem;
      position: relative;
      transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .nav-link .underline-animate {
      display: block;
      height: 2px;
      width: 100%;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      position: absolute;
      left: 0;
      bottom: -3px;
      border-radius: 2px;
      transform: scaleX(0);
      transform-origin: left;
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .nav-link:hover .underline-animate {
      transform: scaleX(1);
    }

    /* Category Tabs */
    .category-tab {
      background: linear-gradient(135deg, rgba(42, 42, 42, 0.8) 0%, rgba(30, 30, 30, 0.8) 100%);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      color: #ccc;
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      font-weight: 500;
      letter-spacing: 0.5px;
    }

    .category-tab::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(248, 103, 0, 0.2), transparent);
      transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .category-tab:hover::before {
      left: 100%;
    }

    .category-tab.active {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      border-color: var(--primary);
      box-shadow: 0 0 40px rgba(248, 103, 0, 0.3);
      transform: translateY(-3px) scale(1.05);
    }

    .category-tab:hover {
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 10px 30px rgba(248, 103, 0, 0.2);
    }

    /* News Cards - SIMPLIFIED */
    .news-card {
      background: linear-gradient(145deg, rgba(30, 30, 30, 0.9) 0%, rgba(42, 42, 42, 0.9) 100%);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 24px;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }

    .news-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--primary), var(--accent), var(--primary));
      transform: scaleX(0);
      transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .news-card:hover {
      transform: translateY(-12px) scale(1.03);
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5), 0 0 40px rgba(248, 103, 0, 0.3);
      border-color: var(--primary);
    }

    .news-card:hover::before {
      transform: scaleX(1);
    }

    .news-card:hover .news-image {
      transform: scale(1.15);
    }

    .news-image {
      transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 16px;
      filter: brightness(0.9);
    }

    .news-card:hover .news-image {
      filter: brightness(1.1);
    }

    /* Newsletter Section */
    .newsletter-section {
      background: linear-gradient(135deg, rgba(30, 30, 30, 0.9) 0%, rgba(42, 42, 42, 0.9) 100%);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 32px;
      position: relative;
      overflow: hidden;
    }

    .newsletter-section::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(248, 103, 0, 0.1) 0%, transparent 70%);
      animation: rotate 25s linear infinite;
    }

    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .newsletter-button-custom {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    .newsletter-button-custom::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .newsletter-button-custom:hover::before {
      left: 100%;
    }

    .newsletter-button-custom:hover {
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 0 40px rgba(248, 103, 0, 0.3);
    }

    /* Pagination */
    .pagination-btn {
      background: linear-gradient(135deg, rgba(42, 42, 42, 0.8) 0%, rgba(30, 30, 30, 0.8) 100%);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      font-weight: 500;
    }

    .pagination-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(248, 103, 0, 0.2), transparent);
      transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .pagination-btn:hover::before {
      left: 100%;
    }

    .pagination-btn.active {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      border-color: var(--primary);
      box-shadow: 0 0 40px rgba(248, 103, 0, 0.3);
      transform: translateY(-2px) scale(1.1);
    }

    .pagination-btn:hover {
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 10px 30px rgba(248, 103, 0, 0.3);
    }

    /* Loading Animation */
    .loading-skeleton {
      background: linear-gradient(90deg, rgba(42, 42, 42, 0.8) 25%, rgba(58, 58, 58, 0.8) 50%, rgba(42, 42, 42, 0.8) 75%);
      background-size: 200% 100%;
      animation: loading 2s infinite;
      border-radius: 24px;
    }

    @keyframes loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    /* Input Fields */
    .newsletter-input {
      background: linear-gradient(135deg, rgba(26, 26, 26, 0.9) 0%, rgba(42, 42, 42, 0.9) 100%);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      font-weight: 500;
    }

    .newsletter-input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 4px rgba(248, 103, 0, 0.1), 0 0 40px rgba(248, 103, 0, 0.3);
      transform: translateY(-2px);
    }

    /* Category Badge */
    .category-badge {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      padding: 6px 16px;
      border-radius: 25px;
      font-size: 0.75rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      box-shadow: 0 4px 15px rgba(248, 103, 0, 0.4);
      position: relative;
      overflow: hidden;
    }

    .category-badge::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }

    .category-badge:hover::before {
      left: 100%;
    }

    /* Typography */
    .news-title {
      background: linear-gradient(135deg, #fff 0%, #f0f0f0 50%, #e0e0e0 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 700;
      line-height: 1.3;
    }

    .hero-title {
      background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 50%, #ff6b35 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 900;
      text-shadow: 0 0 30px rgba(248, 103, 0, 0.5);
    }

    /* Animations */
    .fade-in {
      opacity: 0;
      transform: translateY(50px);
      transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .fade-in.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .slide-in-left {
      opacity: 0;
      transform: translateX(-50px);
      transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .slide-in-left.visible {
      opacity: 1;
      transform: translateX(0);
    }

    .slide-in-right {
      opacity: 0;
      transform: translateX(50px);
      transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .slide-in-right.visible {
      opacity: 1;
      transform: translateX(0);
    }

    /* Stats Cards */
    .stats-card {
      background: linear-gradient(135deg, rgba(30, 30, 30, 0.8) 0%, rgba(42, 42, 42, 0.8) 100%);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .stats-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 0 40px rgba(248, 103, 0, 0.3);
    }

    /* Mobile */
    @media (max-width: 768px) {
      .category-tabs {
        flex-wrap: wrap;
        gap: 8px;
      }
      
      .category-tab {
        flex: 1;
        min-width: 120px;
        font-size: 0.875rem;
        padding: 0.75rem 1rem;
      }

      .hero-title {
        font-size: 2.5rem;
      }
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.3);
    }

    ::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(135deg, var(--accent), var(--primary));
    }

    /* FIX: Använder ID även här för att matcha */
    ul#navMenu.open {
      display: flex;
    }
  </style>
</head>

<body>
  <!-- Floating Particles -->
  <div class="particles" id="particles"></div>

  <div include-html="components/header.html"></div>
  <div class="section-divider-hero"></div>

  <main class="w-full mx-auto p-4 sm:p-6 lg:p-8 max-w-7xl relative z-10">
    <!-- Hero Section -->
    <div class="text-center mb-16 fade-in">
      <div class="glass rounded-3xl p-8 sm:p-12 mb-8">
        <h1 class="hero-title text-4xl sm:text-5xl lg:text-7xl font-bold mb-6">
          Senaste Nytt
        </h1>
        <p class="text-gray-300 text-lg sm:text-xl max-w-3xl mx-auto leading-relaxed">
          Upptäck de senaste nyheterna inom teknik, affärer och innovation. 
          Håll dig uppdaterad med världens mest spännande utvecklingar.
        </p>
        
        <!-- Stats Section -->
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 mt-12">
          <div class="stats-card p-6 text-center hover-lift">
            <i class="fas fa-newspaper text-3xl text-orange-500 mb-3"></i>
            <div class="text-2xl font-bold text-white">100+</div>
            <div class="text-gray-400 text-sm">Artiklar</div>
          </div>
          <div class="stats-card p-6 text-center hover-lift">
            <i class="fas fa-rocket text-3xl text-orange-500 mb-3"></i>
            <div class="text-2xl font-bold text-white">Innovation</div>
            <div class="text-gray-400 text-sm">Framtidens Tech</div>
          </div>
          <div class="stats-card p-6 text-center hover-lift">
            <i class="fas fa-clock text-3xl text-orange-500 mb-3"></i>
            <div class="text-2xl font-bold text-white">24/7</div>
            <div class="text-gray-400 text-sm">Uppdateringar</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content Container -->
    <div class="glass rounded-3xl p-6 sm:p-8 lg:p-12">
      
      <!-- Category Filter Section -->
      <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-12 gap-8">
        <div class="slide-in-left">
          <h2 class="text-3xl sm:text-4xl font-bold text-white mb-3">
            <i class="fas fa-filter text-orange-500 mr-3"></i>
            Filtrera nyheter
          </h2>
          <p class="text-gray-400 text-lg">Välj kategori för att se relevanta artiklar</p>
        </div>
        
        <div class="category-tabs flex flex-wrap gap-4 slide-in-right">
          <button class="category-tab active py-4 px-8 rounded-2xl text-sm font-medium transition-all duration-300" data-category="all">
            <i class="fas fa-globe mr-3"></i>Alla
          </button>
          <button class="category-tab py-4 px-8 rounded-2xl text-sm font-medium transition-all duration-300" data-category="affärer">
            <i class="fas fa-chart-line mr-3"></i>Affärer
          </button>
          <button class="category-tab py-4 px-8 rounded-2xl text-sm font-medium transition-all duration-300" data-category="teknik">
            <i class="fas fa-microchip mr-3"></i>Teknik
          </button>
          <button class="category-tab py-4 px-8 rounded-2xl text-sm font-medium transition-all duration-300" data-category="evenemang">
            <i class="fas fa-calendar-alt mr-3"></i>Evenemang
          </button>
        </div>
      </div>

      <!-- News Grid -->
      <div id="news-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12">
        <!-- Loading skeleton -->
        <div class="loading-skeleton h-80 rounded-3xl"></div>
        <div class="loading-skeleton h-80 rounded-3xl"></div>
        <div class="loading-skeleton h-80 rounded-3xl"></div>
        <div class="loading-skeleton h-80 rounded-3xl"></div>
        <div class="loading-skeleton h-80 rounded-3xl"></div>
        <div class="loading-skeleton h-80 rounded-3xl"></div>
      </div>

      <!-- Pagination -->
      <div id="pagination" class="flex justify-center gap-3 mb-12"></div>

      <!-- Newsletter Section -->
      <div class="newsletter-section p-10 sm:p-12 rounded-3xl relative">
        <div class="relative z-10">
          <div class="text-center mb-8">
            <h3 class="text-3xl sm:text-4xl font-bold mb-4">
              <i class="fas fa-envelope text-orange-500 mr-4"></i>
              Prenumerera på vårt nyhetsbrev
            </h3>
            <p class="text-gray-300 text-xl leading-relaxed">
              Få de senaste nyheterna och uppdateringarna direkt i din inkorg. 
              Vi skickar bara det bästa innehållet.
            </p>
          </div>
          
          <div class="flex flex-col sm:flex-row gap-6 max-w-lg mx-auto">
            <input 
              type="email" 
              placeholder="Ange din e-postadress" 
              class="newsletter-input flex-grow p-5 rounded-2xl text-white placeholder-gray-400 focus:outline-none text-lg"
            />
            <button class="newsletter-button-custom text-white p-5 rounded-2xl font-semibold transition-all duration-300 whitespace-nowrap text-lg">
              <i class="fas fa-paper-plane mr-3"></i>
              Prenumerera
            </button>
          </div>
          
          <div class="text-center mt-6">
            <p class="text-gray-400 text-sm">
              <i class="fas fa-shield-alt mr-2"></i>
              Vi respekterar din integritet och delar aldrig din e-post
            </p>
          </div>
        </div>
      </div>
    </div>
  </main>

  <div class="section-divider-hero"></div>
  <footer>
    <div include-html="components/footer.html"></div>
  </footer>

  <script>
    let allArticles = [];
    let currentCategory = 'all';
    let currentPage = 1;
    const articlesPerPage = 9;

    // Create floating particles
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      const particleCount = 50;

      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 6 + 's';
        particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
        particlesContainer.appendChild(particle);
      }
    }

    function renderArticles() {
      const container = document.getElementById('news-container');
      container.innerHTML = '';
      
      // Filtrera på kategori
      let filtered = currentCategory === 'all'
        ? allArticles
        : allArticles.filter(a => a.category.toLowerCase() === currentCategory);

      // Sortera nyaste först
      filtered = filtered.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));

      // Paginering
      const start = (currentPage - 1) * articlesPerPage;
      const end = start + articlesPerPage;
      const pageArticles = filtered.slice(start, end);

      pageArticles.forEach((article, index) => {
        const html = `
          <div class="news-card h-full fade-in" data-category="${article.category.toLowerCase()}" style="animation-delay: ${index * 0.15}s">
            <div class="p-8 h-full flex flex-col justify-between min-h-[320px] group"
                 data-title="${article.title}"
                 data-category="${article.category}"
                 data-timestamp="${article.timestamp}"
                 data-image="${article.image}"
                 data-excerpt="${article.excerpt}">
              
              <div class="flex-1">
                <div class="flex items-center justify-between mb-6">
                  <span class="category-badge">${article.category}</span>
                  <span class="text-sm text-gray-400">
                    <i class="far fa-clock mr-2"></i>
                    ${formatDate(article.timestamp)}
                  </span>
                </div>
                
                <div class="mb-6">
                  <div class="relative overflow-hidden rounded-2xl mb-6">
                    <img src="${article.image}" class="news-image w-full h-48 object-cover" alt="${article.title}">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                  </div>
                  <h3 class="news-title text-xl font-bold mb-4 line-clamp-2 leading-tight">${article.title}</h3>
                  <p class="text-gray-300 line-clamp-3 leading-relaxed">${article.excerpt}</p>
                </div>
              </div>
              
              <div class="flex items-center justify-between pt-6 border-t border-gray-700/50">
                <span class="text-sm text-gray-400 font-medium">
                  <i class="fas fa-eye mr-2"></i>
                  Läs mer
                </span>
                <i class="fas fa-arrow-right text-orange-500 transition-transform duration-300 group-hover:translate-x-2"></i>
              </div>
            </div>
          </div>`;
        container.innerHTML += html;
      });

      renderPagination(filtered.length);
      animateFadeIn();
      
      // Add click handlers AFTER rendering
      addClickHandlers();
    }

    function addClickHandlers() {
      const cards = document.querySelectorAll('.news-card');
      cards.forEach(card => {
        card.addEventListener('click', function() {
          const dataDiv = this.querySelector('div[data-title]');
          if (dataDiv) {
            const title = encodeURIComponent(dataDiv.dataset.title);
            const category = encodeURIComponent(dataDiv.dataset.category);
            const timestamp = encodeURIComponent(dataDiv.dataset.timestamp);
            const image = encodeURIComponent(dataDiv.dataset.image);
            const excerpt = encodeURIComponent(dataDiv.dataset.excerpt);
            const url = `article-template.html?title=${title}&category=${category}&timestamp=${timestamp}&image=${image}&excerpt=${excerpt}`;
            window.open(url, '_blank');
          }
        });
      });
    }

    function formatDate(timestamp) {
      const date = new Date(timestamp);
      const now = new Date();
      const diffTime = Math.abs(now - date);
      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
      
      if (diffDays === 1) return 'Idag';
      if (diffDays === 2) return 'Igår';
      if (diffDays <= 7) return `${diffDays - 1} dagar sedan`;
      
      return date.toLocaleDateString('sv-SE', {
        year: 'numeric',
        month: 'short',
        day: 'numeric'
      });
    }

    function renderPagination(totalArticles) {
      const pagination = document.getElementById('pagination');
      pagination.innerHTML = '';
      const totalPages = Math.ceil(totalArticles / articlesPerPage);

      // Previous button
      if (totalPages > 1) {
        const prevBtn = document.createElement('button');
        prevBtn.innerHTML = '<i class="fas fa-chevron-left"></i>';
        prevBtn.className = `pagination-btn px-6 py-3 rounded-2xl text-gray-300 hover:text-white transition-all duration-300 ${currentPage === 1 ? 'opacity-50 cursor-not-allowed' : ''}`;
        prevBtn.addEventListener('click', () => {
          if (currentPage > 1) {
            currentPage--;
            renderArticles();
            window.scrollTo({ top: 0, behavior: 'smooth' });
          }
        });
        pagination.appendChild(prevBtn);
      }

      // Page numbers
      for (let i = 1; i <= totalPages; i++) {
        const btn = document.createElement('button');
        btn.textContent = i;
        btn.className = `pagination-btn px-6 py-3 rounded-2xl transition-all duration-300 ${i === currentPage ? 'active text-white' : 'text-gray-300 hover:text-white'}`;
        btn.addEventListener('click', () => {
          currentPage = i;
          renderArticles();
          window.scrollTo({ top: 0, behavior: 'smooth' });
        });
        pagination.appendChild(btn);
      }

      // Next button
      if (totalPages > 1) {
        const nextBtn = document.createElement('button');
        nextBtn.innerHTML = '<i class="fas fa-chevron-right"></i>';
        nextBtn.className = `pagination-btn px-6 py-3 rounded-2xl text-gray-300 hover:text-white transition-all duration-300 ${currentPage === totalPages ? 'opacity-50 cursor-not-allowed' : ''}`;
        nextBtn.addEventListener('click', () => {
          if (currentPage < totalPages) {
            currentPage++;
            renderArticles();
            window.scrollTo({ top: 0, behavior: 'smooth' });
          }
        });
        pagination.appendChild(nextBtn);
      }
    }

    function initNews() {
      fetch('nyheter.json')
        .then(response => response.json())
        .then(data => {
          allArticles = data;
          currentPage = 1;
          renderArticles();
        })
        .catch(error => {
          console.error('Error loading news:', error);
          document.getElementById('news-container').innerHTML = `
            <div class="col-span-full text-center py-16">
              <div class="glass rounded-3xl p-12">
                <i class="fas fa-exclamation-triangle text-6xl text-orange-500 mb-6"></i>
                <h3 class="text-2xl font-bold mb-4">Kunde inte ladda nyheter</h3>
                <p class="text-gray-400 text-lg">Försök igen senare</p>
              </div>
            </div>
          `;
        });
    }

    function applyCategoryFilter(category) {
      currentCategory = category;
      currentPage = 1;
      renderArticles();
    }

    function animateFadeIn() {
      const elements = document.querySelectorAll('.fade-in, .slide-in-left, .slide-in-right');
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      }, { threshold: 0.1 });

      elements.forEach(el => observer.observe(el));
    }

    // Category tab event listeners
    const tabs = document.querySelectorAll('.category-tab');
    tabs.forEach(tab => {
      tab.addEventListener('click', function () {
        tabs.forEach(t => t.classList.remove('active'));
        this.classList.add('active');
        const cat = this.getAttribute('data-category');
        applyCategoryFilter(cat);
      });
    });

    // Newsletter subscription
    document.addEventListener('DOMContentLoaded', function() {
      const newsletterBtn = document.querySelector('.newsletter-button-custom');
      const newsletterInput = document.querySelector('.newsletter-input');
      
      newsletterBtn.addEventListener('click', function() {
        const email = newsletterInput.value.trim();
        if (email && email.includes('@')) {
          // Add success animation
          this.innerHTML = '<i class="fas fa-check mr-3"></i>Prenumererad!';
          this.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
          newsletterInput.value = '';
          
          setTimeout(() => {
            this.innerHTML = '<i class="fas fa-paper-plane mr-3"></i>Prenumerera';
            this.style.background = 'linear-gradient(135deg, #f86700 0%, #e05e00 100%)';
          }, 3000);
        } else {
          newsletterInput.style.borderColor = '#ef4444';
          setTimeout(() => {
            newsletterInput.style.borderColor = 'rgba(255, 255, 255, 0.1)';
          }, 2000);
        }
      });
    });

    // Funktion för att inkludera HTML-komponenter
    function includeHTML() {
      var z, i, elmnt, file, xhttp;
      z = document.getElementsByTagName("*");
      for (i = 0; i < z.length; i++) {
        elmnt = z[i];
        file = elmnt.getAttribute("include-html");
        if (file) {
          xhttp = new XMLHttpRequest();
          xhttp.onreadystatechange = function() {
            if (this.readyState == 4) {
              if (this.status == 200) {elmnt.innerHTML = this.responseText;}
              if (this.status == 404) {elmnt.innerHTML = "Page not found.";}
              elmnt.removeAttribute("include-html");
              includeHTML();
            }
          }
          xhttp.open("GET", file, true);
          xhttp.send();
          return;
        }
      }
    }

    document.addEventListener('DOMContentLoaded', function() {
      createParticles();
      includeHTML();
      initNews();
      animateFadeIn();
      
      // Lägg till scroll-to-top knapp
      const scrollButton = document.createElement('button');
      scrollButton.className = 'scroll-to-top';
      scrollButton.onclick = scrollToTop;
      scrollButton.innerHTML = '<i class="fas fa-arrow-up"></i><span>Ta mig upp</span>';
      document.body.appendChild(scrollButton);
    });
  </script>
  <script src="assets/js/owl-animation.js"></script>
</body>
</html>